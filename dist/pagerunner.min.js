(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?module.exports=factory():typeof define==="function"&&define.amd?define(factory):global.PageRunner=factory()})(this,function(){"use strict";var __assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}return t};var PageRunner=function(){function PageRunner(options){if(options===void 0){options={}}this.options={};this.pages=[];this.globals=[];this.options=__assign({},PageRunner.defaultOptions,options)}PageRunner.prototype.on=function(pageName,fn){var pages=this.pages.slice();var found=false;for(var i=0;i<pages.length;i++){if(pages[i].name===pageName){found=true;break}}if(!found){pages.push({name:pageName,resolved:false,functions:[]})}this.pages=pages.map(function(page){if(page.name===pageName){page.functions.push(fn)}return page});return this};PageRunner.prototype.onAll=function(fn){this.globals.push(fn);return this};PageRunner.prototype.run=function(callbackFn){var _this=this;if(callbackFn===void 0){callbackFn=null}this.globals.map(function(fn){return fn(document.body)});this.pages=this.pages.map(function(page){if(!_this.options.testFn(page.name,document.body)){return page}page.functions.map(function(fn){return fn(page,document.body)});page.resolved=true;return page});if(callbackFn){callbackFn()}};PageRunner.testFn=function(pageName,body){return body.getAttribute("data-page")===pageName};PageRunner.defaultOptions={testFn:PageRunner.testFn};return PageRunner}();return PageRunner});